<div class="profile-wrapper" (click)="fecharMenu()">
  <header class="page-header">
    <img [src]="usuario.imagemUrl || 'assets/images/default-profile.png'" alt="Foto do Perfil" class="header-profile-pic">
    <h1>MEU PERFIL</h1>
    <button class="menu-button" (click)="toggleMenu(); pararPropagacao($event)">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
      </svg>
    </button>
  </header>

  <aside class="sidebar" [class.aberto]="menuAberto" (click)="pararPropagacao($event)">
    <div class="sidebar-header">
      <button class="close-sidebar-button" (click)="toggleMenu()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
          <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
        </svg>
      </button>
      <img [src]="usuario.imagemUrl || 'assets/images/default-profile.png'" alt="Foto do Perfil" class="sidebar-profile-pic">
      <h2>{{ usuario.nome }}</h2>
      <p>{{ usuario.email }}</p>
    </div>
    <nav class="sidebar-nav">
      <ul>
        <li><a routerLink="/check-class" (click)="toggleMenu()">Registrar Presença</a></li>
        <li><a href="#" (click)="toggleMenu()">Configurações</a></li>
        <li><a routerLink="/login" (click)="toggleMenu()">Sair</a></li>
      </ul>
    </nav>
  </aside>
  <div class="overlay" [class.ativo]="menuAberto" (click)="fecharMenu()"></div>

  <main class="profile-content">
    <div *ngIf="isLoading" class="loading-message">Carregando perfil...</div>
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

    <div *ngIf="!isLoading && !errorMessage">
      <section class="events-section">
        <div class="section-header">
          <h2>Meus Eventos Criados</h2>
          <a routerLink="/create-event" class="create-event-button">+ Criar Evento</a>
        </div>
        <div *ngIf="eventosCriados.length > 0; else noCreatedEvents" class="events-list">
          <div class="event-card" *ngFor="let evento of eventosCriados">
            <h3>{{ evento.titulo }}</h3>
            <p>{{ evento.data_hora_inicio | date:'dd/MM/yyyy HH:mm' }}</p>
          </div>
        </div>
        <ng-template #noCreatedEvents>
          <p class="empty-message">Você ainda não criou nenhum evento.</p>
        </ng-template>
      </section>

      <section class="events-section">
        <h2>Eventos que Participei</h2>
        <div *ngIf="eventosParticipados.length > 0; else noParticipatedEvents" class="events-list">
          <div class="event-card" *ngFor="let evento of eventosParticipados">
            <h3>{{ evento.titulo }}</h3>
            <p>{{ evento.data_hora_inicio | date:'dd/MM/yyyy HH:mm' }}</p>
          </div>
        </div>
        <ng-template #noParticipatedEvents>
          <p class="empty-message">Você ainda não participou de nenhum evento.</p>
        </ng-template>
      </section>
    </div>
  </main>
</div>